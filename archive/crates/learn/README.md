# learn 

play ground는 playground를 만들기위한 배움의 여정이자 그 결과이다. 결과는 깔끔하게 
정리해야 하지만 배우는 과정은 깔끔할 수 없는 실패와 개선의 반복이다. 

내가 하고자 하는 일은 사람들이 함께 놀 수 있는 놀이터를 만드는 것이다. 견고하고 
아름다운 세계를 만들 수 있는 도구가 되어야 한다. 클라이언트는 언리얼, 고도, 유니티와 같은 
엔진이 있고 그걸 잘 다루는 사람들이 쉽게 세계를 구현할 수 있도록 하는 도구를 만들도록 
한다. 

## tcp 

- json 
- flexbuffer

두 가지 통신을 연습하면서 최대한 빠른 구조를 찾는다. 헤메는 과정이 잘 포함되도록 한다. 

Server의 구현에서 여러 오브젝트를 관리하는 맵은 항상 필요하다. thread-safe 하면서 
빠른 구현이 있다면 그것을 사용하는 것도 괜찮다. 특성을 먼저 잘 알고 있어야 한다. 

dashmap이 빠르다고 하므로 연관된 자료를 찾고 직접 tokio에서 실행 특성을 비교한다. 

### DashMap 

자체로 여러 벤치마킹을 잘 실해해서 결과를 보여준다. bustle을 벤치마킹 툴로 사용한다. 
bustle 사용법을 익히고 RwLock<HashMap<u32, u32>>에 대해 읽고 쓰는 정도만 확인한다. 

### benchmark tool 

bustle 외에도 기본으로 내장된 cargo bench의 테스트 툴이 있다. 
Criterion은 하스켈에서 포팅한 벤치마킹 툴이고 cargo bench로 실행 가능하다. 

락 contetion을 포함한 여러 쓰레드에서 실행을 벤치마킹하는 건 약간 까다롭다. 

DashMap의 코드를 살펴본다. 

bustle로 여러 쓰레드에서 테스트를 하고 plotter로 이미지까지 생성한다. 아직 
이 정도 수준으로 벤치마킹을 하기 어렵다. DashMap을 사용하면서 더 보도록 한다. 

### DashMap 사용법 









